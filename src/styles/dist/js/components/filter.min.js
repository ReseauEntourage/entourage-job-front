/*! UIkit 3.6.22 | https://www.getuikit.com | (c) 2014 - 2023 YOOtheme | MIT License */
!(function (t, e) {
  'object' == typeof exports && 'undefined' != typeof module
    ? (module.exports = e(require('uikit-util')))
    : 'function' == typeof define && define.amd
    ? define('uikitfilter', ['uikit-util'], e)
    : ((t =
        'undefined' != typeof globalThis ? globalThis : t || self).UIkitFilter =
        e(t.UIkit.util));
})(this, function (p) {
  'use strict';
  function e(t) {
    for (
      var e = t, n = 'top', i = 'bottom', r = [[]], o = 0;
      o < e.length;
      o++
    ) {
      var a = e[o];
      if (p.isVisible(a))
        for (var s = l(a), u = r.length - 1; 0 <= u; u--) {
          var c = r[u];
          if (!c[0]) {
            c.push(a);
            break;
          }
          var f = void 0;
          if (
            ((f =
              c[0].offsetParent === a.offsetParent
                ? l(c[0])
                : ((s = l(a, !0)), l(c[0], !0))),
            s[n] >= f[i] - 1 && s[n] !== f[n])
          ) {
            r.push([a]);
            break;
          }
          if (s[i] - 1 > f[n] || s[n] === f[n]) {
            c.push(a);
            break;
          }
          if (0 === u) {
            r.unshift([a]);
            break;
          }
        }
    }
    return r;
  }
  function l(t, e) {
    var n = t.offsetTop,
      i = t.offsetLeft,
      r = t.offsetHeight,
      o = t.offsetWidth;
    return (
      (e = void 0 === e ? !1 : e) &&
        ((n = (e = p.offsetPosition(t))[0]), (i = e[1])),
      { top: n, left: i, bottom: n + r, right: i + o }
    );
  }
  var r = 'uk-transition-leave',
    d = 'uk-transition-enter';
  function o(t, a, s, u) {
    void 0 === u && (u = 0);
    function e(t) {
      return function () {
        return c === h(a) ? t() : p.Promise.reject();
      };
    }
    var c = h(a, !0),
      f = { opacity: 1 },
      l = { opacity: 0 },
      n = e(function () {
        return (
          p.addClass(a, r),
          p.Promise.all(
            g(a).map(function (e, n) {
              return new p.Promise(function (t) {
                return setTimeout(function () {
                  return p.Transition.start(e, l, s / 2, 'ease').then(t);
                }, n * u);
              });
            })
          ).then(function () {
            return p.removeClass(a, r);
          })
        );
      }),
      i = e(function () {
        var o = p.height(a);
        return (
          p.addClass(a, d),
          t(),
          p.css(p.children(a), { opacity: 0 }),
          new p.Promise(function (r) {
            return requestAnimationFrame(function () {
              var t = p.children(a),
                e = p.height(a),
                n =
                  (p.css(a, 'alignContent', 'flex-start'),
                  p.height(a, o),
                  g(a)),
                i =
                  (p.css(t, l),
                  n.map(function (e, n) {
                    return new p.Promise(function (t) {
                      return setTimeout(function () {
                        return p.Transition.start(e, f, s / 2, 'ease').then(t);
                      }, n * u);
                    });
                  }));
              o !== e &&
                i.push(
                  p.Transition.start(
                    a,
                    { height: e },
                    s / 2 + n.length * u,
                    'ease'
                  )
                ),
                p.Promise.all(i).then(function () {
                  p.removeClass(a, d),
                    c === h(a) &&
                      (p.css(a, { height: '', alignContent: '' }),
                      p.css(t, { opacity: '' }),
                      delete a.dataset.transition),
                    r();
                });
            });
          })
        );
      });
    return (
      p.hasClass(a, r) ? m(a) : p.hasClass(a, d) ? m(a).then(n) : n()
    ).then(i);
  }
  function h(t, e) {
    return (
      e && (t.dataset.transition = 1 + h(t)),
      p.toNumber(t.dataset.transition) || 0
    );
  }
  function m(t) {
    return p.Promise.all(
      p
        .children(t)
        .filter(p.Transition.inProgress)
        .map(function (e) {
          return new p.Promise(function (t) {
            return p.once(e, 'transitionend transitioncanceled', t);
          });
        })
    );
  }
  function g(t) {
    return e(p.children(t)).reduce(function (t, e) {
      return t.concat(
        p.sortBy(
          e.filter(function (t) {
            return p.isInView(t);
          }),
          'offsetLeft'
        )
      );
    }, []);
  }
  function a(t, d, h) {
    return new p.Promise(function (l) {
      return requestAnimationFrame(function () {
        var u = p.children(d),
          c = u.map(function (t) {
            return v(t, !0);
          }),
          f = p.css(d, ['height', 'padding']);
        p.Transition.cancel(d),
          u.forEach(p.Transition.cancel),
          y(d),
          t(),
          (u = u.concat(
            p.children(d).filter(function (t) {
              return !p.includes(u, t);
            })
          )),
          p.Promise.resolve().then(function () {
            p.fastdom.flush();
            var n,
              i,
              r,
              t,
              e = p.css(d, ['height', 'padding']),
              o =
                ((n = d),
                (r = c),
                (o = (i = u).map(function (t, e) {
                  return (
                    !!(p.parent(t) && e in r) &&
                    (r[e]
                      ? p.isVisible(t)
                        ? b(t)
                        : { opacity: 0 }
                      : { opacity: p.isVisible(t) ? 1 : 0 })
                  );
                })),
                (t = o.map(function (t, e) {
                  e = p.parent(i[e]) === n && (r[e] || v(i[e]));
                  return (
                    !!e &&
                    (t
                      ? 'opacity' in t ||
                        (e.opacity % 1 ? (t.opacity = 1) : delete e.opacity)
                      : delete e.opacity,
                    e)
                  );
                })),
                [o, t]),
              a = o[0],
              s = o[1];
            u.forEach(function (t, e) {
              return s[e] && p.css(t, s[e]);
            }),
              p.css(d, p.assign({ display: 'block' }, f)),
              requestAnimationFrame(function () {
                var t = u
                  .map(function (t, e) {
                    return (
                      p.parent(t) === d &&
                      p.Transition.start(t, a[e], h, 'ease')
                    );
                  })
                  .concat(p.Transition.start(d, e, h, 'ease'));
                p.Promise.all(t)
                  .then(function () {
                    u.forEach(function (t, e) {
                      return (
                        p.parent(t) === d &&
                        p.css(t, 'display', 0 === a[e].opacity ? 'none' : '')
                      );
                    }),
                      y(d);
                  }, p.noop)
                  .then(l);
              });
          });
      });
    });
  }
  function v(t, e) {
    var n = p.css(t, 'zIndex');
    return (
      !!p.isVisible(t) &&
      p.assign(
        {
          display: '',
          opacity: e ? p.css(t, 'opacity') : '0',
          pointerEvents: 'none',
          position: 'absolute',
          zIndex: 'auto' === n ? p.index(t) : n,
        },
        b(t)
      )
    );
  }
  function y(t) {
    p.css(t.children, {
      height: '',
      left: '',
      opacity: '',
      pointerEvents: '',
      position: '',
      top: '',
      marginTop: '',
      marginLeft: '',
      transform: '',
      width: '',
      zIndex: '',
    }),
      p.css(t, { height: '', display: '', padding: '' });
  }
  function b(t) {
    var e = p.offset(t),
      n = e.height,
      e = e.width,
      i = p.position(t),
      r = i.top,
      i = i.left,
      t = p.css(t, ['marginTop', 'marginLeft']);
    return {
      top: r,
      left: i,
      height: n,
      width: e,
      marginLeft: t.marginLeft,
      marginTop: t.marginTop,
      transform: '',
    };
  }
  var t = {
    mixins: [
      {
        props: { duration: Number, animation: Boolean },
        data: { duration: 150, animation: 'slide' },
        methods: {
          animate: function (t, e) {
            var n = this,
              i = (void 0 === e && (e = this.$el), this.animation);
            return (
              'fade' === i
                ? o
                : 'delayed-fade' === i
                ? function () {
                    for (var t = [], e = arguments.length; e--; )
                      t[e] = arguments[e];
                    return o.apply(void 0, t.concat([40]));
                  }
                : i
                ? a
                : function () {
                    return t(), p.Promise.resolve();
                  }
            )(t, e, this.duration).then(function () {
              return n.$update(e, 'resize');
            }, p.noop);
          },
        },
      },
    ],
    args: 'target',
    props: { target: Boolean, selActive: Boolean },
    data: {
      target: null,
      selActive: !1,
      attrItem: 'uk-filter-control',
      cls: 'uk-active',
      duration: 250,
    },
    computed: {
      toggles: {
        get: function (t, e) {
          t = t.attrItem;
          return p.$$('[' + t + '],[data-' + t + ']', e);
        },
        watch: function () {
          var e,
            n = this;
          this.updateState(),
            !1 !== this.selActive &&
              ((e = p.$$(this.selActive, this.$el)),
              this.toggles.forEach(function (t) {
                return p.toggleClass(t, n.cls, p.includes(e, t));
              }));
        },
        immediate: !0,
      },
      children: {
        get: function (t, e) {
          t = t.target;
          return p.$$(t + ' > *', e);
        },
        watch: function (t, e) {
          var n;
          e &&
            ((n = e),
            (e = t).length !== n.length ||
              !e.every(function (t) {
                return ~n.indexOf(t);
              })) &&
            this.updateState();
        },
        immediate: !0,
      },
    },
    events: [
      {
        name: 'click',
        delegate: function () {
          return '[' + this.attrItem + '],[data-' + this.attrItem + ']';
        },
        handler: function (t) {
          t.preventDefault(), this.apply(t.current);
        },
      },
    ],
    methods: {
      apply: function (t) {
        var e,
          n,
          i = this.getState(),
          t = s(t, this.attrItem, this.getState());
        (e = i),
          (n = t),
          ['filter', 'sort'].every(function (t) {
            return p.isEqual(e[t], n[t]);
          }) || this.setState(t);
      },
      getState: function () {
        var n = this;
        return this.toggles
          .filter(function (t) {
            return p.hasClass(t, n.cls);
          })
          .reduce(
            function (t, e) {
              return s(e, n.attrItem, t);
            },
            { filter: { '': '' }, sort: [] }
          );
      },
      setState: function (a, e) {
        var s = this;
        void 0 === e && (e = !0),
          (a = p.assign({ filter: { '': '' }, sort: [] }, a)),
          p.trigger(this.$el, 'beforeFilter', [this, a]),
          this.toggles.forEach(function (t) {
            return p.toggleClass(
              t,
              s.cls,
              !!(function (t, e, n) {
                var i = n.filter;
                void 0 === i && (i = { '': '' });
                var n = n.sort,
                  r = n[0],
                  n = n[1],
                  t = u(t, e),
                  e = t.filter;
                void 0 === e && (e = '');
                var o = t.group;
                void 0 === o && (o = '');
                var a = t.sort,
                  t = t.order;
                void 0 === t && (t = 'asc');
                return p.isUndefined(a)
                  ? (o in i && e === i[o]) || (!e && o && !(o in i) && !i[''])
                  : r === a && n === t;
              })(t, s.attrItem, a)
            );
          }),
          p.Promise.all(
            p.$$(this.target, this.$el).map(function (o) {
              function t() {
                var t, e, n, i, r;
                (t = a),
                  (e = o),
                  (n = p.children(o)),
                  (i = (function (t) {
                    var t = t.filter,
                      e = '';
                    return (
                      p.each(t, function (t) {
                        return (e += t || '');
                      }),
                      e
                    );
                  })(t)),
                  n.forEach(function (t) {
                    return p.css(
                      t,
                      'display',
                      i && !p.matches(t, i) ? 'none' : ''
                    );
                  }),
                  (t = t.sort),
                  (r = t[0]),
                  (t = t[1]),
                  r &&
                    ((r = (function (t, n, i) {
                      return p.assign([], t).sort(function (t, e) {
                        return (
                          p.data(t, n).localeCompare(p.data(e, n), void 0, {
                            numeric: !0,
                          }) * ('asc' === i || -1)
                        );
                      });
                    })(n, r, t)),
                    p.isEqual(r, n) || p.append(e, r)),
                  s.$update(s.$el);
              }
              return e ? s.animate(t, o) : t();
            })
          ).then(function () {
            return p.trigger(s.$el, 'afterFilter', [s]);
          });
      },
      updateState: function () {
        var t = this;
        p.fastdom.write(function () {
          return t.setState(t.getState(), !1);
        });
      },
    },
  };
  function u(t, e) {
    return p.parseOptions(p.data(t, e), ['filter']);
  }
  function s(t, e, n) {
    var t = u(t, e),
      e = t.filter,
      i = t.group,
      r = t.sort,
      t = t.order;
    return (
      void 0 === t && (t = 'asc'),
      (e || p.isUndefined(r)) &&
        (i
          ? e
            ? (delete n.filter[''], (n.filter[i] = e))
            : (delete n.filter[i],
              (p.isEmpty(n.filter) || '' in n.filter) &&
                (n.filter = { '': e || '' }))
          : (n.filter = { '': e || '' })),
      p.isUndefined(r) || (n.sort = [r, t]),
      n
    );
  }
  return (
    'undefined' != typeof window &&
      window.UIkit &&
      window.UIkit.component('filter', t),
    t
  );
});
